(function(e){function t(t){for(var a,o,s=t[0],c=t[1],l=t[2],u=0,m=[];u<s.length;u++)o=s[u],r[o]&&m.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("64a9"),r=n.n(a);r.a},"08a1":function(e,t,n){},1:function(e,t){},2:function(e,t){},"25f7":function(e,t,n){"use strict";var a=n("8aa0"),r=n.n(a);r.a},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-navbar",{attrs:{fixed:"top",toggleable:"sm",type:"dark",variant:"dark"}},[n("b-navbar-toggle",{staticClass:"mr-auto",attrs:{target:"nav-collapse"}}),n("b-navbar-brand",{attrs:{to:"/"}},[e._v("Smith Login System")]),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{attrs:{to:"/login"}},[e._v("Login")]),n("b-nav-item",{attrs:{to:"/register"}},[e._v("Register")])],1)],1)],1),n("router-view")],1)},i=[],o=(n("034f"),n("2877")),s={},c=Object(o["a"])(s,r,i,!1,null,null,null),l=c.exports,d=n("8c4f"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("div",{staticClass:"wrapper fadeInDown"},[n("div",{attrs:{id:"formContent"}},[e.pictureTaken?e._e():n("h4",[e._v("Please center your face")]),n("div",[n("vc-cam",{ref:"camera",attrs:{fit:"cover",width:e.size,height:e.size}})],1),n("form",{on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],class:{"fadeIn second notValid":e.$v.name.$invalid,"fadeIn second valid":!e.$v.name.$invalid},attrs:{type:"name",id:"name",name:"name",placeholder:"Name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("button",{staticClass:"btn btn-primary",attrs:{disabled:e.$v.name.$invalid||!e.pictureTaken,type:"submit"}},[e._v("Register")])]),null!==e.Embedding?n("button",{staticClass:"mb-2 mt-2 fadeIn btn btn-danger",on:{click:function(t){return e.downloadEmbedding()}}},[e._v("Download Face Embedding")]):e._e()])]),n("b-modal",{ref:"registerImage",attrs:{"hide-footer":""}},[n("template",{slot:"modal-title"},[e._v("\n    This will be the registered image\n  ")]),n("div",{staticClass:"d-block"},[n("img",{attrs:{src:e.image,alt:"",srcset:""}})])],2)],1)},m=[],p=(n("ac6a"),n("f499")),f=n.n(p),h=(n("7f7f"),n("b5ae")),g=(n("ab39"),{name:"register",data:function(){return{name:"",size:300,pictureTaken:!1,picture:"",CaptureImage:"Capture Image",image:"",Embedding:null}},validations:{name:{required:h["required"]}},methods:{spinner:function(){this.loader=this.$loading.show({canCancel:!0,onCancel:this.onCancel})},cancelLoader:function(){this.loader.hide()},register:function(){var e=this;if(this.spinner(),this.$v.name.$touch(),!this.$v.name.$error){var t=this.$refs.camera.snapshot();console.log(t),this.name=this.name.toLowerCase(),console.log({name:this.name}),this.$http.post("https://smith-face-login.herokuapp.com/register",{name:this.name,image:t}).then(function(t){e.Embedding=f()(t.body["Embedding"]),e.cancelLoader(),e.$swal({type:"success",title:"Logged In"})},function(t){console.log("err",t),e.cancelLoader(),403===t.status?e.$swal({type:"error",title:"Oops...",text:"Name already exists"}):e.$swal({type:"error",title:"Oops...",text:"Error in occured"})})}},takePic:function(){var e=this;this.pictureTaken=!0,this.spinner();var t=this,n=this.$refs.camera.snapshot();this.$http.post("https://smith-face-login.herokuapp.com/checkFace",{image:n}).then(function(e){t.image=e.body["image"],t.CaptureImage="Retake Image",t.$refs["registerImage"].show(),t.cancelLoader()},function(n){403===n.status?e.$swal({type:"error",title:"Oops...",text:"No face detected"}):e.$swal({type:"error",title:"Oops...",text:"Error in occured"}),t.cancelLoader()})},downloadEmbedding:function(){var e=new Blob([this.Embedding],{type:"text/csv"}),t=document.createElement("a");t.download="Embedding.dat",t.href=URL.createObjectURL(e),t.dataset.downloadurl=["text/txt",t.download,t.href].join(":"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(function(){URL.revokeObjectURL(t.href)},1500)}},mounted:function(){var e=document.getElementsByTagName("video")[0],t=e.parentElement.offsetWidth;e.setAttribute("style","height: auto !important;width: "+t+"px !important;");var n=document.createElement("canvas"),a=document.getElementsByTagName("canvas")[0];a.parentElement.setAttribute("style","margin: 0; overflow:"),a.parentElement.appendChild(n),n.setAttribute("style","position: absolute; top: 0; left: 0; margin-left: 22px; margin-top: 20px");var r=new tracking.ObjectTracker(["face"]);r.setInitialScale(4),r.setStepSize(2),r.setEdgesDensity(.1);tracking.track("video",r);var i=0,o=this;r.on("track",function(n){if(0!==n.data.length)n.data.forEach(function(n){var a=document.getElementsByTagName("canvas")[1];a.width=t,a.height=e.parentElement.offsetHeight;var r=a.getContext("2d");r.strokeStyle="red",r.rect(n.x,n.y,n.width,n.height),r.stroke(),new Date-i>=500&&(console.log("Pic Taken"),o.picture=o.$refs.camera.snapshot(),o.pictureTaken=!0,i=new Date)});else if(new Date-i>=1300){new Date;var a=document.getElementsByTagName("canvas")[1];a.width=t,a.height=e.parentElement.offsetHeight;var r=a.getContext("2d");r.stroke()}})}}),v=g,b=(n("8a6e"),Object(o["a"])(v,u,m,!1,null,"78cc0ada",null)),y=b.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("div",{staticClass:"wrapper fadeInDown"},[n("div",{attrs:{id:"formContent"}},[e.pictureTaken?e._e():n("h4",[e._v("Please center your face")]),n("div",[n("vc-cam",{ref:"camera",attrs:{fit:"cover"}})],1),n("form",{on:{submit:function(t){return t.preventDefault(),e.login(!0)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],class:{"fadeIn second notValid":e.$v.name.$invalid,"fadeIn second valid":!e.$v.name.$invalid},attrs:{type:"name",id:"name",name:"name",placeholder:"Name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),n("button",{staticClass:"fadeIn btn btn-primary",attrs:{disabled:e.$v.name.$invalid||!e.pictureTaken,type:"submit"}},[e._v("Login")])]),n("div",{staticClass:"mt-3"},[n("input",{staticClass:"fadeIn input-file",attrs:{type:"file",name:"embedding",accept:".dat"},on:{change:function(t){return e.uploadFile(t)}}}),n("button",{staticClass:"fadeIn btn btn-info",attrs:{disabled:e.$v.name.$invalid||null===e.embedding,type:"submit"},on:{click:function(t){return e.login(!1)}}},[e._v("Login using Embedding")])])])])])},$=[],k={name:"login",data:function(){return{name:"",size:300,loader:null,embedding:null,face:null,picture:"",pictureTaken:!1}},validations:{name:{required:h["required"]}},methods:{spinner:function(){this.loader=this.$loading.show({canCancel:!0,onCancel:this.onCancel})},cancelLoader:function(){this.loader.hide()},login:function(e){var t=this;this.spinner(),this.$v.name.$touch(),this.$v.name.$error||(this.name=this.name.toLowerCase(),this.$http.post("https://smith-face-login.herokuapp.com/login",e?{name:this.name,image:this.picture,imageFlag:e}:{name:this.name,embedding:JSON.parse(this.embedding),imageFlag:e}).then(function(e){console.log("response",e),t.$swal({type:"success",title:"Logged In"}),t.cancelLoader()},function(e){console.log("err",e),t.cancelLoader(),403===e.status?t.$swal({type:"error",title:"Oops...",text:"Name doesn't match your face"}):400===e.status?t.$swal({type:"error",title:"Oops...",text:"No name registered"}):t.$swal({type:"error",title:"Oops...",text:"Error in occured"})}))},uploadFile:function(e){var t=this;this.spinner();var n=e.target.files[0],a=new FileReader,r=this;a.readAsDataURL(n),a.onloadend=function(e){r.embedding=a.result,a.readAsText(n)},setInterval(function(){t.embedding&&t.cancelLoader()},1e3)}},mounted:function(){var e=document.getElementsByTagName("video")[0],t=e.parentElement.offsetWidth;e.setAttribute("style","height: auto !important;width: "+t+"px !important;");var n=document.createElement("canvas"),a=document.getElementsByTagName("canvas")[0];a.parentElement.setAttribute("style","margin: 0; overflow:"),a.parentElement.appendChild(n),n.setAttribute("style","position: absolute; top: 0; left: 0; margin-left: 22px; margin-top: 20px");var r=new tracking.ObjectTracker(["face"]);r.setInitialScale(4),r.setStepSize(2),r.setEdgesDensity(.1);tracking.track("video",r);var i=0,o=this;r.on("track",function(n){if(0!==n.data.length)n.data.forEach(function(n){var a=document.getElementsByTagName("canvas")[1];a.width=t,a.height=e.parentElement.offsetHeight;var r=a.getContext("2d");r.strokeStyle="red",r.rect(n.x,n.y,n.width,n.height),r.stroke(),new Date,new Date-i>=500&&(console.log("Pic Taken"),o.picture=o.$refs.camera.snapshot(),o.pictureTaken=!0,i=new Date)});else if(new Date-i>=1300){new Date;var a=document.getElementsByTagName("canvas")[1];a.width=t,a.height=e.parentElement.offsetHeight;var r=a.getContext("2d");r.stroke()}})}},E=k,x=(n("25f7"),Object(o["a"])(E,w,$,!1,null,"98d41170",null)),C=x.exports,_=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},T=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("h1",{staticStyle:{padding:"40vh 10vh 0px",color:"black"}},[n("strong",[e._v("Welcome to our facial login system")])])])}],O={name:"home",data:function(){return{}},methods:{}},L=O,I=(n("b344"),Object(o["a"])(L,_,T,!1,null,"3ef0e91e",null)),j=I.exports;a["default"].use(d["a"]);var D=new d["a"]({mode:"history",base:"/",routes:[{path:"/register",name:"register",component:y},{path:"/login",name:"login",component:C},{path:"/home",name:"home",component:j},{path:"/",redirect:"/home"},{path:"*",redirect:"/home"}]}),N=n("9f7b"),S=n.n(N),P=n("28dd"),B=n("1dce"),R=n.n(B),A=n("619c"),F=n("9062"),z=n.n(F);n("e40d"),n("9db3"),n("81f4"),n("f3ab"),n("f9e3"),n("2dd8");a["default"].use(z.a),a["default"].use(S.a),a["default"].use(P["a"]),a["default"].use(R.a),a["default"].use(A["a"]),a["default"].config.productionTip=!1,new a["default"]({router:D,render:function(e){return e(l)}}).$mount("#app")},"64a9":function(e,t,n){},"8a6e":function(e,t,n){"use strict";var a=n("08a1"),r=n.n(a);r.a},"8aa0":function(e,t,n){},"8d45":function(e,t,n){},b344:function(e,t,n){"use strict";var a=n("8d45"),r=n.n(a);r.a}});
//# sourceMappingURL=app.643d0db9.js.map